# INPUT = [3,21,1008,21,8,20,1005,20,22,107,8,21,20,1006,20,31,1106,0,36,98,0,0,1002,21,125,20,4,20,1105,1,46,104,999,1105,1,46,1101,1000,1,20,4,20,1105,1,46,98,99]
INPUT = [3, 225, 1, 225, 6, 6, 1100, 1, 238, 225, 104, 0, 2, 218, 57, 224, 101, -3828, 224, 224, 4, 224, 102, 8, 223,
         223, 1001, 224, 2, 224, 1, 223, 224, 223, 1102, 26, 25, 224, 1001, 224, -650, 224, 4, 224, 1002, 223, 8, 223,
         101, 7, 224, 224, 1, 223, 224, 223, 1102, 44, 37, 225, 1102, 51, 26, 225, 1102, 70, 94, 225, 1002, 188, 7, 224,
         1001, 224, -70, 224, 4, 224, 1002, 223, 8, 223, 1001, 224, 1, 224, 1, 223, 224, 223, 1101, 86, 70, 225, 1101,
         80, 25, 224, 101, -105, 224, 224, 4, 224, 102, 8, 223, 223, 101, 1, 224, 224, 1, 224, 223, 223, 101, 6, 91,
         224, 1001, 224, -92, 224, 4, 224, 102, 8, 223, 223, 101, 6, 224, 224, 1, 224, 223, 223, 1102, 61, 60, 225,
         1001, 139, 81, 224, 101, -142, 224, 224, 4, 224, 102, 8, 223, 223, 101, 1, 224, 224, 1, 223, 224, 223, 102, 40,
         65, 224, 1001, 224, -2800, 224, 4, 224, 1002, 223, 8, 223, 1001, 224, 3, 224, 1, 224, 223, 223, 1102, 72, 10,
         225, 1101, 71, 21, 225, 1, 62, 192, 224, 1001, 224, -47, 224, 4, 224, 1002, 223, 8, 223, 101, 7, 224, 224, 1,
         224, 223, 223, 1101, 76, 87, 225, 4, 223, 99, 0, 0, 0, 677, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1105, 0, 99999,
         1105, 227, 247, 1105, 1, 99999, 1005, 227, 99999, 1005, 0, 256, 1105, 1, 99999, 1106, 227, 99999, 1106, 0, 265,
         1105, 1, 99999, 1006, 0, 99999, 1006, 227, 274, 1105, 1, 99999, 1105, 1, 280, 1105, 1, 99999, 1, 225, 225, 225,
         1101, 294, 0, 0, 105, 1, 0, 1105, 1, 99999, 1106, 0, 300, 1105, 1, 99999, 1, 225, 225, 225, 1101, 314, 0, 0,
         106, 0, 0, 1105, 1, 99999, 108, 226, 677, 224, 102, 2, 223, 223, 1005, 224, 329, 1001, 223, 1, 223, 1107, 677,
         226, 224, 102, 2, 223, 223, 1006, 224, 344, 1001, 223, 1, 223, 7, 226, 677, 224, 1002, 223, 2, 223, 1005, 224,
         359, 101, 1, 223, 223, 1007, 226, 226, 224, 102, 2, 223, 223, 1005, 224, 374, 101, 1, 223, 223, 108, 677, 677,
         224, 102, 2, 223, 223, 1006, 224, 389, 1001, 223, 1, 223, 107, 677, 226, 224, 102, 2, 223, 223, 1006, 224, 404,
         101, 1, 223, 223, 1108, 677, 226, 224, 102, 2, 223, 223, 1006, 224, 419, 1001, 223, 1, 223, 1107, 677, 677,
         224, 1002, 223, 2, 223, 1006, 224, 434, 101, 1, 223, 223, 1007, 677, 677, 224, 102, 2, 223, 223, 1006, 224,
         449, 1001, 223, 1, 223, 1108, 226, 677, 224, 1002, 223, 2, 223, 1006, 224, 464, 101, 1, 223, 223, 7, 677, 226,
         224, 102, 2, 223, 223, 1006, 224, 479, 101, 1, 223, 223, 1008, 226, 226, 224, 102, 2, 223, 223, 1006, 224, 494,
         101, 1, 223, 223, 1008, 226, 677, 224, 1002, 223, 2, 223, 1005, 224, 509, 1001, 223, 1, 223, 1007, 677, 226,
         224, 102, 2, 223, 223, 1005, 224, 524, 1001, 223, 1, 223, 8, 226, 226, 224, 102, 2, 223, 223, 1006, 224, 539,
         101, 1, 223, 223, 1108, 226, 226, 224, 1002, 223, 2, 223, 1006, 224, 554, 101, 1, 223, 223, 107, 226, 226, 224,
         1002, 223, 2, 223, 1005, 224, 569, 1001, 223, 1, 223, 7, 226, 226, 224, 102, 2, 223, 223, 1005, 224, 584, 101,
         1, 223, 223, 1008, 677, 677, 224, 1002, 223, 2, 223, 1006, 224, 599, 1001, 223, 1, 223, 8, 226, 677, 224, 1002,
         223, 2, 223, 1006, 224, 614, 1001, 223, 1, 223, 108, 226, 226, 224, 1002, 223, 2, 223, 1006, 224, 629, 101, 1,
         223, 223, 107, 677, 677, 224, 102, 2, 223, 223, 1005, 224, 644, 1001, 223, 1, 223, 8, 677, 226, 224, 1002, 223,
         2, 223, 1005, 224, 659, 1001, 223, 1, 223, 1107, 226, 677, 224, 102, 2, 223, 223, 1005, 224, 674, 1001, 223, 1,
         223, 4, 223, 99, 226]


def read(index, mode):
    if mode == 0:
        return INPUT[INPUT[index]]
    elif mode == 1:
        return INPUT[index]
    else:
        return "chyba"


def add(index: int, c, b, a):
    x = read(index + 1, c)
    y = read(index + 2, b)
    INPUT[INPUT[index + 3]] = x + y
    return index + 4


def multi(index: int, c, b, a):
    x = read(index + 1, c)
    y = read(index + 2, b)
    INPUT[INPUT[index + 3]] = x * y
    return index + 4


def insert(index: int, c):
    where = INPUT[index + 1]
    value = int(input("Input: "))
    INPUT[where] = value
    return index + 2


def output(index: int, c):
    if c == 0:
        where = INPUT[index + 1]
    else:
        # c ==1
        where = index + 1
    print(f"Output: {INPUT[where]}   {INPUT[index - 4:index]}; {INPUT[index:index + 2]}; {INPUT[index + 2:index + 6]}")
    return index + 2


def jump_if_true(index, c, b):
    x = read(index + 1, c)
    if x != 0:
        return read(index + 2, b)
    else:
        return index + 3


def jump_if_false(index, c, b):
    x = read(index + 1, c)
    if x == 0:
        return read(index + 2, b)
    else:
        return index + 3


def less_than(index, c, b, a):
    x = read(index + 1, c)
    y = read(index + 2, b)
    if x < y:
        INPUT[INPUT[index + 3]] = 1
    else:
        INPUT[INPUT[index + 3]] = 0
    return index + 4


def equals(index, c, b, a):
    x = read(index + 1, c)
    y = read(index + 2, b)
    if x == y:
        INPUT[INPUT[index + 3]] = 1
    else:
        INPUT[INPUT[index + 3]] = 0
    return index + 4


def exit():
    # print(INPUT[0])
    # if INPUT[0] == 19690720:
    #    exit()
    return False


def operation(index: int):
    opcode, c, b, a = get_params(INPUT[index])

    if opcode == 1:
        next = add(index, c, b, a)
    elif opcode == 2:
        next = multi(index, c, b, a)
    elif opcode == 3:
        next = insert(index, c)
    elif opcode == 4:
        next = output(index, c)
    elif opcode == 5:
        next = jump_if_true(index, c, b)
    elif opcode == 6:
        next = jump_if_false(index, c, b)
    elif opcode == 7:
        next = less_than(index, c, b, a)
    elif opcode == 8:
        next = equals(index, c, b, a)
    elif opcode == 99:
        next = exit()
    else:
        print(INPUT[index])
        next = False

    return next


def get_params(opcode):
    if opcode <= 99:
        return opcode, 0, 0, 0
    else:
        mode = opcode // 100
        opcode = opcode % 100
        c = int(str(mode)[-1])
        if len(str(mode)) == 3:
            a = int(str(mode)[-3])
            b = int(str(mode)[-2])
        elif len(str(mode)) == 2:
            b = int(str(mode)[-2])
            a = 0
        else:
            b = a = 0
    return opcode, c, b, a


def main_loop(index):
    while index is not False:
        # if index > 15:
        #     print(INPUT[index:index+8])
        #     print(index)
        index = operation(index)


# for i in range(100):
#     for j in range(100):
#         INPUT = INPUT2.copy()
#         INPUT[1] = i
#         INPUT[2] = j
#         print(i, j)
#         main_loop(0)

main_loop(0)